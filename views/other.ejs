<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio Ghibli Films</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <style>
        .background-image{
            background: url('https://wallpapercave.com/wp/wp9259186.jpg') fixed center;
            background-image: url('https://wallpapercave.com/wp/wp9259186.jpg');
            background-attachment: fixed;
            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
            height: 100vh;
        }
    </style>
</head>
<body class="background-image">
     <!--NAVBAR-->
     <nav class="navbar navbar-expand-lg bg-dark">
        <div class="container-fluid">
          <a class="navbar-brand text-warning" href="#">Studio GHIBLI FIlms</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active text-light" aria-current="page" href="/">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active text-light" href="/other">Other</a>
              </li>
            </ul>
          </div>
        </div>
    </nav>
    <img style="margin-left:auto; margin-right:auto; display:block; padding-top:50px" src="https://ghibliapi.herokuapp.com/images/logo.svg" alt="">
    <div class="text-light" id="app" style="margin-left: 150px; margin-right: 100px; padding-top: 100px;"></div>
</body>
<script>


    // Import JSON data
    fetch('https://ghibliapi.herokuapp.com/films')
    .then(response => response.json())
    .then(data => {
        console.log("Successfully claimed the data")
        //console.log(data)
        displayData(data)
    })
    .catch(err => {
        console.log("Error: " + err)
    })


    // Display our Data
    function displayData(data){
        //display to body tag
        var app = document.getElementById('app')


        for (i = 0; i < data.length; i++) {
            const currentFilm = data[i]
            

            var filmContainer = document.createElement('div')
            var charContainer = document.createElement('div')
            var locationContainer = document.createElement('div')
            var vehicleContainer = document.createElement('div')
            var speciesContainer = document.createElement('div') 

            var image = document.createElement('img')
            var filmTitle = document.createElement('h1')           
            var filmOrigTitle = document.createElement('h3')
            var filmDescription = document.createElement('p')           
            
           
            //image size
            image.height = 400;
            image.width = 475;

            filmTitle.innerHTML = currentFilm.title
            filmDescription.innerHTML = currentFilm.description
            filmOrigTitle.innerHTML = currentFilm.original_title
            image.src = currentFilm.image
            
            
            filmContainer.appendChild(image)
            filmContainer.appendChild(filmTitle)
            filmContainer.appendChild(filmOrigTitle)
            filmContainer.appendChild(filmDescription)

            //display characters
            getPeople(currentFilm,charContainer,app)

            //display locations
            getLocs(currentFilm,locationContainer,app)

            //display vehicles
            getVehicles(currentFilm,vehicleContainer,app)

            //display species
            getSpecies(currentFilm,speciesContainer,app)
                          
            app.appendChild(filmContainer) 

        }
        function getPeople(currentFilm,anyContainer,app) {
          //get character
          if(currentFilm.people != "https://ghibliapi.herokuapp.com/people/"){
                var labelCharacter = document.createElement('h3')
                labelCharacter.innerText = "Characters:"
                filmContainer.appendChild(labelCharacter)
                
                for(x = 0; x < currentFilm.people.length; x++){
                    const currentPeople = currentFilm.people[x]
                    fetch(currentPeople)
                    .then(response => response.json())
                    .then(data1 => {
                        var filmCharacters = document.createElement('li')
                        filmCharacters.innerHTML = data1.name
                        anyContainer.appendChild(filmCharacters)   
                        console.log("Character data successful for character[" + x + "]")                    
                    })
                    .catch(err => {
                        console.log("Error" + err)
                    })
                    
                }  
                filmContainer.append(anyContainer)              
            }      
        }

        function getLocs(currentFilm,anyContainer,app) {
          //get locations
          if(currentFilm.locations != "https://ghibliapi.herokuapp.com/locations/"){
                var labelLocation = document.createElement('h3')
                labelLocation.innerText = "Locations:"
                filmContainer.appendChild(labelLocation)
                
                for(y = 0; y < currentFilm.locations.length; y++){
                    const currentLocations = currentFilm.locations[y]
                    fetch(currentLocations)
                    .then(response => response.json())
                    .then(data2 => {
                        var filmLocations = document.createElement('li')
                        filmLocations.innerHTML = data2.name
                        anyContainer.appendChild(filmLocations) 
                        console.log("Location data successful for location[" + y + "]")                      
                    })
                    .catch(err => {
                        console.log("Error" + err)
                    })
                    
                }  
                filmContainer.append(anyContainer)              
            }
        } 

        function getVehicles(currentFilm,anyContainer,app) {
          //get vehicles
          if(currentFilm.vehicles != "https://ghibliapi.herokuapp.com/vehicles/"){
                var labelVehicles = document.createElement('h3')
                labelVehicles.innerText = "Vehicles:"
                filmContainer.appendChild(labelVehicles)
                
                for(z = 0; z < currentFilm.vehicles.length; z++){
                    const currentVehicles = currentFilm.vehicles[z]
                    fetch(currentVehicles)
                    .then(response => response.json())
                    .then(data3 => {
                        var filmVehicles = document.createElement('li')
                        filmVehicles.innerHTML = data3.name
                        anyContainer.appendChild(filmVehicles) 
                        console.log("Vehicle data successful for vehicle[" + z + "]")                      
                    })
                    .catch(err => {
                        console.log("Error" + err)
                    })
                    
                }  
                filmContainer.append(anyContainer)              
            }
        }
        
        function getSpecies(currentFilm,anyContainer,app) {
          //get species
          if(currentFilm.species != "https://ghibliapi.herokuapp.com/species/"){
                var labelSpecies = document.createElement('h3')
                labelSpecies.innerText = "Species:"
                filmContainer.appendChild(labelSpecies)
                
                for(a = 0; a < currentFilm.species.length; a++){
                    const currentSpecies = currentFilm.species[a]
                    fetch(currentSpecies)
                    .then(response => response.json())
                    .then(data4 => {
                        var filmSpecies = document.createElement('li')
                        filmSpecies.innerHTML = data4.name
                        anyContainer.appendChild(filmSpecies)  
                        console.log("Species data successful for species[" + a + "]")                     
                    })
                    .catch(err => {
                        console.log("Error" + err)
                    })
                    
                }  
                filmContainer.append(anyContainer)              
            }
        }  
    } 
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js" integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous"></script>
</html>